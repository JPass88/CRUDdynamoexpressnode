<!DOCTYPE html>
<html lange="en"> 

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width",
    initial-scale=1.0">
    <!-- <link rel="stylesheet" href="./stylesheet.css"> -->
    <title>Web App</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./test.js"></script>
</head>

<body>
    <div style="margin:50px;">
   
        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <a class="navbar-brand" href="/">Home</a>
            <ul class="nav navbar-nav">
              <li class="active">
                <!-- <a href="/">Home</a> -->
              </li>
              <li>                  
                <a href="">About</a>
              </li>                
              <li>
                <a href="">Mission</a>
                <!-- <a href="/sitemap">Sitemap</a> -->
              </li>
            </ul>
          </div>
        </nav>
            <div class="jumbotron"  style="padding:20px;">
              <h1>Hello, Bonjour!</h1>
              <p>This is the humble beginning of CanFren!.</p>
              <p><a class="btn btn-primary btn-lg" href="#" role="button" id="learn-btn">Learn more</a></p>

              <label>Name:</label>
        <input type="text" id="name-input">
        <button id="add-name-btn" onclick="testFunc()">Add Name</button>

        <br><br><br>
        <div>
            <input placeholder="search by id" id="search-input">
            <input type="button" id="search-btn">Search</button> 
        </div>

        <!-- TEST -->

        <script>

          //const uri = 'https://jsonplaceholder.typicode.com/posts';
          const uri = 'http://tutorialnodejscrudapipipe-env.eba-ac7mk4vc.us-east-2.elasticbeanstalk.com/product?productId=10001';
          const initDetails = {
              method: 'get',
              headers: {
                  "Content-Type": "application/json; charset=utf-8"
              },
              mode: "cors"
          }
  
          function GetData() {
  
              fetch( uri, initDetails )
                  .then( response =>
                  {
                      if ( response.status !== 200 )
                      {
                          console.log( 'Looks like there was a problem. Status Code: ' +
                              response.status );
                          return;
                      }
  
                      //console.log( response.headers.get( "Content-Type" ) );
                      return response.json();
                  }
                  )
                  .then( myJson =>
                  {
                      console.log( JSON.stringify( myJson ) );
                      console.log(myJson.color);
                      console.log( JSON.stringify( myJson.color)) ;
                      console.log("");
                      console.log( typeof JSON.stringify( myJson ) );
                      console.log( typeof myJson.price);
                      console.log( typeof JSON.stringify( myJson.price)) ;
                  } )
                  .catch( err =>
                  {
                      console.log( 'Fetch Error :-S', err );
                  } );

              
          }

        function insertRowIntoTable(data) {
          console.log(data);
          const table = document.querySelector('table tbody');
          const isTableData = table.querySelector('.no-data'); // checks if table is from no-data class
      
          let tableHtml = "<tr>";
      
          for (var key in data) {  // loop through array
              if (data.hasOwnProperty(key)) {    // if key has a..
                  if (key === 'dateAdded') {     // ..date added
                      data[key] = new Date(data[key]).toLocaleString(); 
                  }
                  tableHtml += `<td>${data[key]}</td>`; //add to table's HTML
              }
          }
    
            // tableHtml += `<td><button class="delete-row-btn" data-id=${data.id}>Delete</td>`;
            // tableHtml += `<td><button class="edit-row-btn" data-id=${data.id}>Edit</td>`;
        
            tableHtml += "</tr>";
        
            if (isTableData) { // if table is empty..set table to all new HTML
                table.innerHTML = tableHtml;
            } else {           // else, add HTML to innerHTML
                const newRow = table.insertRow();
                newRow.innerHTML = tableHtml;
            }
        }
    
        function loadHTMLTable(data) {
            const table = document.querySelector('table tbody');
        
            if (data.length === 0) {
                table.innerHTML = "<tr><td class='no-data' colspan='5'>No Data</td></tr>";
                return;
            }
        
            let tableHtml = "";
        
            data.forEach(function ({id, color, price}) {
                tableHtml += "<tr>";
                tableHtml += `<td>${id}</td>`;
                tableHtml += `<td>${color}</td>`;
                tableHtml += `<td>${price}</td>`;            
                tableHtml += "</tr>";
            });
        
            table.innerHTML = tableHtml;
        }

      </script>
      
      <button id='getData' onclick="GetData()">Get Data</button>

        <!-- END OF TEST -->

        <table id="table">
            <thead> 
                <th>ID</th>
                <th>Color</th>
                <th>Price</th>
                <!-- <th>Delete</th>
                <th>Edit</th>  -->
            </thead>
            <tbody></tbody> <!-- dynamically inserted using JS -->
        </table>

            </div>
          </div>

    <main>

        <!-- <section hidden id="update-row">
            <label>Name:</label>
            <input type="text" id="update-name-input">
            <button id="update-row-btn">Update</button>
        </section> -->

    </main>
    
</body>
</html>